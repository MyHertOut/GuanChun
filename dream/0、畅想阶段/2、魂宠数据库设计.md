# 魂宠数据库设计文档

本文档详细定义了《宠魅：灵魂羁绊》游戏中魂宠数据库的数据结构、字段含义及关联逻辑。

## 1. 数据结构概述

数据库采用 **JSON** 格式存储，以便于跨平台（Python/Web）读取和解析。
核心文件位于 `dream/data/soul_pets.json`。

### 1.1 核心对象结构 (Soul Pet Object)

每一只魂宠（或其特定形态）作为一个独立的对象存储。

| 字段名 (Field) | 类型 (Type) | 必填 | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `id` | String | Yes | 唯一标识符，建议使用数字字符串，如 "1001" |
| `name` | String | Yes | 魂宠名称，如 "月光狐" |
| `rank` | String | Yes | 种族等级 (Species Rank) |
| `elements` | Array[String] | Yes | 属性列表，如 ["妖灵", "兽"] |
| `description` | String | No | 魂宠的背景描述或图鉴介绍 |
| `base_stats` | Object | Yes | 基础战斗属性 (详见 1.2) |
| `skills` | Array[Object] | No | 自带技能池 (详见 1.3) |
| `evolutions` | Array[Object] | No | 进化/异变路径 (详见 1.4) |

### 1.2 基础属性 (Base Stats)

定义魂宠在同等级下的基础能力值。

```json
"base_stats": {
  "health": 100,      // 基础生命值
  "stamina": 80,      // 基础体力/耐力
  "attack": 10,       // 基础攻击力
  "defense": 5,       // 基础防御力
  "speed": 15         // 基础速度 (决定出手顺序)
}
```

### 1.3 技能池 (Skills)

定义该魂宠能够自然领悟的技能。

```json
"skills": [
  {
    "learn_level": 1,         // 领悟等级 (成长阶段)
    "skill_id": "S001",       // 关联到技能数据库的ID
    "name": "月光",            // 技能名称 (冗余字段，方便阅读)
    "description": "在月光下恢复体力" // 简述
  }
]
```

### 1.4 进化/异变 (Evolutions)

定义魂宠可以进化成的形态。这是《宠魅》的核心玩法。

```json
"evolutions": [
  {
    "target_id": "1002",      // 进化后的魂宠ID
    "type": "evolution",      // 类型: "evolution"(正常进化) 或 "mutation"(异变)
    "condition": {            // 触发条件
      "min_level": 10,        // 最低等级
      "item_needed": "月光石", // 所需物品 (可选)
      "environment": "夜晚"    // 所需环境 (可选)
    }
  }
]
```

## 2. 枚举值定义 (Enums)

为了保证数据的一致性，以下字段使用预定义的枚举值。

### 2.1 种族等级 (Rank)

从低到高：
1.  **奴仆级** (Servant)
2.  **战将级** (Warrior)
3.  **统领级** (Commander)
4.  **君主级** (Monarch)
5.  **帝皇级** (Emperor)
6.  **主宰级** (Dominator)
7.  **不朽级** (Immortal)

### 2.2 属性 (Elements)

*   兽系 (Beast)
*   妖灵系 (Demon)
*   元素界：火 (Fire), 冰 (Ice), 雷 (Thunder), 风 (Wind), 土 (Earth/Rock), 水 (Water)
*   植物界：木 (Wood/Plant), 藤 (Vine)
*   虫系 (Bug)
*   鬼系 (Ghost)
*   龙系 (Dragon)
*   其他：光 (Light), 暗 (Dark), 空间 (Space)

## 3. 数据示例

```json
{
  "id": "1001",
  "name": "月光狐",
  "rank": "奴仆级",
  "elements": ["妖灵"],
  "description": "月光狐是一种高贵而优雅的魂宠，喜欢在夜晚吸收月光精华。",
  "base_stats": {
    "health": 60,
    "stamina": 100,
    "attack": 15,
    "defense": 10,
    "speed": 25
  },
  "evolutions": [
    {
      "target_id": "1005",
      "type": "mutation",
      "condition": {
        "description": "战斗中濒死爆发，且处于满月环境"
      }
    }
  ]
}
```
